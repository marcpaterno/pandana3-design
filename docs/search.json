[{"path":"index.html","id":"preface","chapter":"Preface","heading":"Preface","text":"design document current work progress.\ndesign PandAna 3 yet complete;\nfact, far complete.\ncontinually updated understanding needed \nexperimenters needed.work done part \nSciDAC project\nHEP analytics HPC.","code":""},{"path":"what-pandana-is-for-and-why-we-are-designing-pandana-3.html","id":"what-pandana-is-for-and-why-we-are-designing-pandana-3","chapter":"1 What PandAna is for, and why we are designing PandAna 3","heading":"1 What PandAna is for, and why we are designing PandAna 3","text":"Starting PandAna 2, project goals development easy--use environment fast scalable analysis.\nachieve ease--use use Python Python data science tools (numpy pandas).PandAna 2 support parallel processing data using MPI.\nmanner lets users almost entirely ignore issues regarding MPI.\nprimarily done arranging reading HDF5 files assure data single event never split across MPI ranks.\nanalysis can treat event independently, means user code never needs communicate MPI ranks.\nresult code works serial program also work parallel program.program organization yields excellent (nearly perfect) scaling properties -memory processing portion analysis.\nHowever, reading performance becomes limiting factor relatively small MPI programs—using hundred MPI ranks.\ngood performance obtained HDF5 reading size dataset read rank large.goal PandAna 3 abilities PandAna 2, include automated MPI parallelism high-performance IO (especially reading) large data samples.\nFurthermore, looking redesign internals PandAna allow automatic optimization workflows scheduling reading data evaluation calculations efficient fashion.plans re-design include introducing something like abstract syntax tree (AST) describe “calculation” done analysis.\ncalculation question creation table data (HEP, often called ntuple) used tasks creation histograms plots, calculation summary statistics, fitting.\nintroducing AST provide opportunity apply optimizations calculation evaluation calculated result; formal separation creation AST evaluation.","code":""},{"path":"basic-elements.html","id":"basic-elements","chapter":"2 Basic elements","heading":"2 Basic elements","text":"PandAna, basic calculational elements Cuts Vars.\nVar represents data; Cut represents selections done data.Vars Cuts often built component Vars Cuts.\nimportant remember Python generally uses reference semantics objects.\ncommon functions manipulate state container Var Cut modify state components.\nresult, user retains references components can see changed.","code":""},{"path":"basic-elements.html","id":"vars","chapter":"2 Basic elements","heading":"2.1 Vars","text":"central feature “analysis”, represent , evaluation one Vars.\nVar represents data either read directly input file calculated analysis program, typically data read input file.\nVars can make histograms, scatterplots, statistical summaries, etc.\nVar evaluates table, implementation pandas.DataFrame (henceforth, just DataFrame).\nevaluation Var requires specification file used source data Var.identified several types Vars.SimpleVar: SimpleVar responsible reading data file.\nperforms operations data.MutatedVar: MutatedVar based upon Var, also contains function transforms DataFrame Var evaluate order yield value MutatedVar.GroupedVar:","code":""},{"path":"basic-elements.html","id":"filteredvar","chapter":"2 Basic elements","heading":"2.1.1 FilteredVar","text":"","code":""},{"path":"basic-elements.html","id":"arithmeticvar","chapter":"2 Basic elements","heading":"2.1.2 ArithmeticVar","text":"","code":""},{"path":"basic-elements.html","id":"cuts","chapter":"2 Basic elements","heading":"2.2 Cuts","text":"Cut:evaluates array booleans (either np.ndarray DataFrame one boolean column).gets applied Vars select rows “pass cut”.identified types Cuts.","code":""},{"path":"basic-elements.html","id":"filtering","chapter":"2 Basic elements","heading":"2.3 Filtering","text":"","code":""},{"path":"basic-elements.html","id":"indexing","chapter":"2 Basic elements","heading":"2.4 Indexing","text":"","code":""},{"path":"basic-elements.html","id":"grouping","chapter":"2 Basic elements","heading":"2.5 Grouping","text":"","code":""},{"path":"basic-elements.html","id":"other-things-that-are-interesting","chapter":"2 Basic elements","heading":"2.6 Other things that are interesting","text":"","code":""},{"path":"filteredvar-design.html","id":"filteredvar-design","chapter":"3 FilteredVar design","heading":"3 FilteredVar design","text":"FilteredVar represents data subjected sort filtering process (cut).\nFilteredVar contains Cut (represents filtering condition) Var (represents data filtered).\nCut contains Var, contains data used evaluate predicate part Cut.\nEvaluation FilteredVar proceeds :evaluation Cut, yields boolean pd.Series defining rows Var pass selection criteria.evaluation Var, yields pd.DataFrame.application pd.Series pd.DataFrame yield final pd.DataFrame.Note Vars involved calculation can type Var, just SimpleVars.\nmajor issue design must resolve : make sure Var Cut FilteredVar compatible, meaning meaningful use pd.Series yielded evaluating Cut pd.DataFrame yielded evaluating base Var?\nmeaningful series dataframe contain entries correspond object.\nexample, meaningful make cut based quality measure electrons found algorithm apply cut kinematic quantities electrons found algorithm, even kinematic quantities quality measures found different tables.\nmake sense apply cut created muon quality measure table electrons, make sense apply cut quality measure electrons found algorithm kinematic quantities electrons found algorithm B.\nVars involved FilteredVar may SimpleVars, must able extend verification consistency work two types Vars.","code":""},{"path":"filteredvar-design.html","id":"prefer-to-fail-early","chapter":"3 FilteredVar design","heading":"3.1 Prefer to fail early","text":"good able sanity-check FilteredVar without needing refer data file.\nSince seem possible, better sanity-check FilteredVar based reading file metadata rather failing dataframe-processing time reading large data file.may incompatibilities can detected read data file, .\nerrors can diagnosed.","code":""},{"path":"filteredvar-design.html","id":"current-design-candidate","chapter":"3 FilteredVar design","heading":"3.2 Current design candidate","text":"relying upon metadata stored Group file. metadata stored Attribute named index_cols; list names Datasets Group index columns, correct order define unique multidimensional index (sense Pandas).\nintent use index information allow determination whether FilteredVar well-formed .\nNote design sufficient assure FilteredVar well-formed.\nexample data file slightly different design , muons electrons tables index columns evtnum idx, determine incompatible.\nelectrons electrons_qual tables index columns, tell compatible.Question: NOvA tables labeled fashion compatible use?","code":""},{"path":"filteredvar-design.html","id":"metadata-describing-the-objects-in-a-table","chapter":"3 FilteredVar design","heading":"3.3 Metadata describing the objects in a table","text":"table contain metadata labeling objects table, use metadata determine whether two tables appropriate combination.\nrejected unclear organize metadata allow scaling; Vars involved process SimpleVars, calculate appropriate metadata?Instead, metadata available Group (ordered) list names index columns Group.","code":""},{"path":"filteredvar-design.html","id":"random-questions-and-observations","chapter":"3 FilteredVar design","heading":"3.4 Random questions and observations","text":"need know columns need read used indexing.\nwant require user specify columns.\n(Data columns read already specified user.)want read columns necessary.need distinguish index columns data columns inside Vars?\nnow seems necessary.types Index Grouping, subtypes, clear meanings possibly redundant.","code":""},{"path":"filteredvar-design.html","id":"use-cases","chapter":"3 FilteredVar design","heading":"3.5 Use cases","text":"section document, list use cases illustrate kinds things FilteredVar able .\nfollowing section, list cases things make sense, like FilteredVar diagnose wrong, possible .\ncase comes textual description (generally brief), table showing Var Cut data member FilteredVar, d example list index columns Var access .\nNote index columns need read; part finding design allows us read minimal amount index information.\nnames columns intentionally chosen abstract.\nNote real experiments’ data, names things like b; things like eventnum electron_idx.\nlast item line text description represented Var Cut.diagrams UML object diagrams. box shows specific object.\ntop part box shows either object name type, just type\nbottom part box shows data owned object, specifically basic types.\nlines also show data ownership complex types.\nNote diagrams index_columns available read, must read.","code":""},{"path":"filteredvar-design.html","id":"uc-0","chapter":"3 FilteredVar design","heading":"3.5.1 UC 0","text":"want electron pt eta electrons abs(eta) < 1.5.index columns need read evalute Var.","code":""},{"path":"filteredvar-design.html","id":"uc-1","chapter":"3 FilteredVar design","heading":"3.5.2 UC 1","text":"want electron pt phi electrons events met > 10.index column must read evaluate Var.FilteredVar UC 1","code":""},{"path":"filteredvar-design.html","id":"uc-2","chapter":"3 FilteredVar design","heading":"3.5.3 UC 2","text":"case, var inside FilteredVar FilteredVar.want electron quality information electrons pt > 15 events met > 10.FilteredVar UC 2What index columns need read evaluation?\nneed order get first cut work.\nelectrons electrons_qual tables identical indexing, actually need read b column get right alignment rows; simple index dataframe suffice.\ntest system verifies behavior Pandas.","code":""},{"path":"filteredvar-design.html","id":"uc-3","chapter":"3 FilteredVar design","heading":"3.5.4 UC 3","text":"case similar UC 2, difference index columns var FilteredVar different index columns cut.want electron hit energy information hits electrons, electrons pt > 15, events met > 10.FilteredVar UC 3In case, need read index columns b, rows dataframe var can correctly aligned elements series cut.","code":""},{"path":"filteredvar-design.html","id":"non-use-cases","chapter":"3 FilteredVar design","heading":"3.6 Non-use cases","text":"Note cases want support often descriptions clearly incoherent.\nwant support ! key make code automatically detect incoherence, possible. People make mistakes code, want catch many can.","code":""},{"path":"filteredvar-design.html","id":"nuc-1","chapter":"3 FilteredVar design","heading":"3.6.1 NUC 1","text":"want event met electrons quality q1 > 0.75.","code":""},{"path":"filteredvar-design.html","id":"nuc-2","chapter":"3 FilteredVar design","heading":"3.6.2 NUC 2","text":"come!","code":""}]
